using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class UpholsteryController : MonoBehaviour
{
	Renderer m_renderer;
	public Globals.Upholstery upholstery;

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void Awake()
	{
		Messenger.AddListener(MessengerEventsEnum.CHANGE_INT_UPHOLSTERY, OnUpholsteryChanged);
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	IEnumerator Start()
	{
		yield return new WaitForEndOfFrame();
		OnUpholsteryChanged();
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void OnDestroy()
	{
		Messenger.RemoveListener(MessengerEventsEnum.CHANGE_INT_UPHOLSTERY, OnUpholsteryChanged);
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
	void OnUpholsteryChanged()
	{
		foreach(Transform child in transform){
			child.gameObject.SetActive(Globals.instance.currentUpholstery == upholstery);
		}
	}
}
