using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class UpholsteryControllerTouareg : MonoBehaviour
{
	public Material[] materials;
	Renderer m_renderer;

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void Awake()
	{
		Messenger.AddListener(MessengerEventsEnum.CHANGE_INT_UPHOLSTERY, OnUpholsteryChanged);
		m_renderer = GetComponent<Renderer>();
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	IEnumerator Start()
	{
		yield return new WaitForEndOfFrame();
		OnUpholsteryChanged();
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void OnDestroy()
	{
		Messenger.RemoveListener(MessengerEventsEnum.CHANGE_INT_UPHOLSTERY, OnUpholsteryChanged);
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
	
	void OnUpholsteryChanged()
	{
		if(Globals.instance.currentModel == Globals.Models.TOUAREG){
			m_renderer.material = materials[(int)Globals.instance.currentUpholstery - 7];
		}
	}
}