using UnityEngine;
using System.Collections;

public class BodyMaterialCtrl : MonoBehaviour
{
	Renderer m_renderer;
	public bool isRoof = false;

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void Awake()
	{
		m_renderer = GetComponent<Renderer>();
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void Start()
	{
		ChangeMaterial();
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void OnEnable()
	{
		Messenger.AddListener(MessengerEventsEnum.CHANGE_EXT_BODY_COLOR, ChangeMaterial);

		ChangeMaterial();
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void OnDisable()
	{
		Messenger.RemoveListener(MessengerEventsEnum.CHANGE_EXT_BODY_COLOR, ChangeMaterial);
	}

	//////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

	void ChangeMaterial()
	{
		if(Globals.instance != null){
			if(isRoof){
				m_renderer.sharedMaterial = Globals.instance.car_materials_body[(int)Globals.instance.currentPaintRoof];
			}else{
				m_renderer.sharedMaterial = Globals.instance.car_materials_body[(int)Globals.instance.currentPaintBody];
			}
		}
	}
}
